---
layout: post
title:  "linux 2T以上大磁盘分区与格式化"
date:   2016-7-18 14:20:33 
categories: jekyll update
---


传统的fdisk分区不支持2T以上的磁盘分区，而parted分区可以支持，而ext4格式不支持16T以上的磁盘空间分区，必须使用xfs分区；

磁盘大于2T时候需要如下操作；

	parted -s /dev/sdb mkpart primary 0GB 30000.3GB --分区

	mkfs.ext4 /dev/sdb1 --格式化

	mkdir /backup && mount /dev/sdb1 /backup --挂载

	vim /etc/fstab -----不要复制，添加开机挂载

	/dev/sdb1          /backup           ext4                defaults    0 0

ext4格式不支持16T以上的磁盘空间分区，必须使用xfs分区

	yum install xfsprogs kmod-xfs xfsdump xfsprogs-devel --安装模块

	modprobe xfs --添加模块到系统

	lsmod |grep xfs --查看

	parted -s /dev/sdb -- mklabel gpt mkpart primary xfs 0 -1s

	mkfs.xfs -f /dev/sdb1 --格式化,设备没有正确对齐，加-f

	mkdir /gfs && mount -t xfs /dev/sdb1 /gfs --挂载

	vim /etc/fstab -----不要复制，添加开机挂载

	/dev/sdb1          /gfs           xfs                defaults    0 0